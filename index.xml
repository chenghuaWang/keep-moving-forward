<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ubios Home</title>
    <link>https://chenghuawang.github.io/keep-moving-forward/</link>
    <description>Recent content on Ubios Home</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 09 Jul 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://chenghuawang.github.io/keep-moving-forward/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ã€æ–½å·¥ä¸­ã€‘Implementing `Class`/`struct` type in MLIR using MemRef and DataLayout</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/impl_mlir_class/</link>
      <pubDate>Sun, 09 Jul 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/impl_mlir_class/</guid>
      <description>å¾ˆå¤šæ—¶å€™ï¼Œäººä»¬æƒ³è¦ä½¿ç”¨ MLIR åœ¨ high-level å®ç°ä¸€äº› fancy çš„ ideaã€‚è¿™äº› idea å¯èƒ½ä¼šæ¶‰åŠåˆ° structï¼Œclass è¿™äº›ç±»å‹ã€‚è™½ç„¶ MLIR æ˜¯ä¸€ä¸ªéå¸¸å®Œå¤‡çš„æ¡†æ¶ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ª type å† lowering åˆ° llvmï¼Œä½†æ˜¯æˆ‘æƒ³å¤§éƒ¨åˆ†äººå¹¶ä¸æƒ³è§¦ç¢°åˆ° llvm Dialect å±‚æ¬¡(è¿™éœ€è¦å­¦ä¹ å¾ˆå¤šä¸œè¥¿)ï¼Œä»–ä»¬åªæ˜¯æƒ³åœ¨ high-level å®Œæˆä¸€äº›åˆ›ä½œç½¢äº†ã€‚é‚£ä¹ˆ MemRef Dialect å°±å˜å¾—ååˆ†çš„é‡è¦äº†ã€‚</description>
    </item>
    
    <item>
      <title>ã€æ–½å·¥ä¸­ã€‘[Notes] The Deep Learning Compiler: A Comprehensive Survey</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/papers/dl_compiler_survey/</link>
      <pubDate>Wed, 14 Jun 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/papers/dl_compiler_survey/</guid>
      <description>Looking back for Looking forwardè¿™ç¯‡ç¬”è®°è®°å½•äº† Deep Learning Compiler Survey 1 çš„ä¸€äº›å†…å®¹ã€‚å› ä¸ºæ–‡ç« æ˜¯ 2020 å¹´å‘çš„ï¼ŒMLSys è¿™ä¸ªé¢†åŸŸæœ€è¿‘å‘å±•çš„éå¸¸å¿«é€Ÿï¼Œæˆ‘ä¹Ÿä¼šåœ¨æ–‡ä¸­è¡¥å……ä¸€ç‚¹å†…å®¹ï¼Œè¡¥å……å†…å®¹éƒ½ä¼šç”¨ bullet å—æŒ‡å‡ºã€‚
ç®€ä»‹
åœ¨ä¸åŒçš„æ·±åº¦å­¦ä¹ ç¡¬ä»¶ä¸Šéƒ¨ç½²å„ç§æ·±åº¦å­¦ä¹ æ¨¡å‹çš„å›°éš¾ï¼Œä¿ƒè¿›äº†ç¤¾åŒºå†…æ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨çš„ç ”ç©¶å’Œå¼€å‘ã€‚å·¥ä¸šç•Œå’Œå­¦æœ¯ç•Œéƒ½æå‡ºäº†ä¸€äº›æ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨ï¼Œå¦‚ Tensorflow XLA å’Œ TVMã€‚åŒæ ·ï¼Œæ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨å°†ä¸åŒæ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­æè¿°çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ä½œä¸ºè¾“å…¥ï¼Œç„¶åä¸ºä¸åŒçš„æ·±åº¦å­¦ä¹ ç¡¬ä»¶ç”Ÿæˆç‰¹å®šçš„ä¼˜åŒ–ä»£ç ä½œä¸ºè¾“å‡ºã€‚ç„¶è€Œï¼Œç°æœ‰çš„ç»¼è¿°éƒ½æ²¡æœ‰å…¨é¢åœ°åˆ†ææ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨çš„ç‹¬ç‰¹è®¾è®¡æ¶æ„ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œä½œè€…ä»¬å¯¹ç°æœ‰çš„æ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨è¿›è¡Œäº†å…¨é¢çš„è°ƒæŸ¥ï¼Œè¯¦ç»†å‰–æäº†æ™®éé‡‡ç”¨çš„è®¾è®¡ï¼Œé‡ç‚¹æ˜¯é¢å‘æ·±åº¦å­¦ä¹ çš„å¤šçº§IRï¼Œä»¥åŠå‰ç«¯/åç«¯ä¼˜åŒ–ã€‚ä½œè€…å¯¹å¤šçº§ IR çš„è®¾è®¡è¿›è¡Œäº†è¯¦ç»†çš„åˆ†æï¼Œå¹¶è¯´æ˜äº†æ™®éé‡‡ç”¨çš„ä¼˜åŒ–æŠ€æœ¯ã€‚æœ€åï¼Œä½œè€…å¼ºè°ƒäº†æ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨çš„å‡ ä¸ªæ½œåœ¨ç ”ç©¶æ–¹å‘ã€‚è¿™æ˜¯ç¬¬ä¸€ç¯‡å…³æ³¨æ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨è®¾è®¡æ¶æ„çš„ç»¼è¿°è®ºæ–‡ï¼Œå¸Œæœ›å®ƒèƒ½ä¸ºæœªæ¥çš„æ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨ç ”ç©¶é“ºå¹³é“è·¯ã€‚
1. ä»‹ç» æ·±åº¦å­¦ä¹ (DL)çš„å‘å±•å·²ç»å¯¹å„ä¸ªç§‘å­¦é¢†åŸŸäº§ç”Ÿäº†æ·±è¿œçš„å½±å“ã€‚å®ƒä¸ä»…åœ¨äººå·¥æ™ºèƒ½ï¼Œå¦‚è‡ªç„¶è¯­è¨€å¤„ç†(NLP) 2 å’Œè®¡ç®—æœºè§†è§‰(CV) 3 ä¸­è¡¨ç°å‡ºä»¤äººæƒŠè®¶çš„ä»·å€¼ï¼Œè€Œä¸”åœ¨æ›´å¹¿æ³›çš„é¢†åŸŸä¹Ÿå–å¾—äº†å·¨å¤§æˆåŠŸã€‚è¯¸å¦‚ç”µå­å•†åŠ¡ 4 ã€æ™ºèƒ½åŸå¸‚ 5 å’Œè¯ç‰©æ¢ç´¢ 6 ç­‰æ›´å¹¿æ³›çš„åº”ç”¨ä¸­å–å¾—äº†å·¨å¤§æˆåŠŸã€‚éšç€å¤šç§ç±»çš„æ·±åº¦å­¦ä¹ æ¨¡å‹å‡ºç°ï¼Œå¦‚å·ç§¯ç¥ç»ç½‘ç»œ(CNN) 7 ã€é€’å½’ç¥ç»ç½‘ç»œ(RNN) 8 ã€é•¿çŸ­æ—¶è®°å¿†ç½‘ç»œ(LSTM) 9 å’Œç”Ÿæˆå¯¹æŠ—ç½‘ç»œ(GAN) 10 ï¼Œæ·±åº¦å­¦ä¹ è¿›ä¸€æ­¥æˆä¸ºä¸€ç§æ—¶ä»£çš„è¶‹åŠ¿ã€‚ä¸ºäº†èƒ½å¤Ÿä½¿å®ƒä»¬è¢«å¹¿æ³›åº”ç”¨ï¼Œç®€åŒ–å„ç§æ·±åº¦å­¦ä¹ æ¨¡å‹æ˜¯è‡³å…³é‡è¦çš„ã€‚
éšç€å·¥ä¸šç•Œå’Œå­¦æœ¯ç•Œçš„ä¸æ–­åŠªåŠ›ï¼Œå‡ ä¸ªæµè¡Œçš„æ·±åº¦å­¦ä¹ æ¡†æ¶å·²è¢«æå‡ºï¼Œå¦‚ TensorFlow 11 ã€PyTorch 12 ã€MXNet 13 å’Œ CNTK 14 ï¼Œè¿™äº›æ¡†æ¶ç®€åŒ–äº†æ·±åº¦å­¦ä¹ æ¨¡å‹çš„å®ç°ã€‚å°½ç®¡æ¯ä¸ªæ¡†æ¶å› ä¸ºè‡ªç”Ÿçš„è®¾è®¡åšäº†ä¸€äº› tradeoffsï¼Œè¿™ä½¿å¾—æ¯ä¸ªæ¡†æ¶éƒ½å„æœ‰ä¼˜åŠ£ã€‚ä½†åœ¨æ”¯æŒæ–°å…´çš„æ·±åº¦å­¦ä¹ æ¨¡å‹å’Œç°æœ‰çš„æ·±åº¦å­¦ä¹ æ¨¡å‹æ—¶ï¼Œäº’æ“ä½œæ€§å¯¹äºå‡å°‘å†—ä½™çš„å·¥ä½œé‡å˜å¾—éå¸¸é‡è¦ã€‚ä¸ºäº†æä¾›äº’æ“ä½œæ€§ï¼ŒONNX 15 è¢«æå‡ºï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªæ·±åº¦å­¦ä¹ æ¨¡å‹çš„ç»Ÿä¸€æ ¼å¼ï¼Œä»¥ä¿ƒè¿›ä¸åŒDLæ¡†æ¶ä¹‹é—´çš„æ¨¡å‹è½¬æ¢ã€‚
è¡¥å……:
è™½ç„¶ ONNX çš„æè¿°éå¸¸çš„ç¾å¥½ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰éå¸¸å¤šçš„ä¸è¶³ã€‚ä¸”ä¸è®ºå…¶ä¸¤ä¸ªç‰ˆæœ¬çš„ API é€‚é…é—®é¢˜ã€‚ONNX å› ä¸ºè¦é€‚é…ä¸åŒæ¡†æ¶çš„ç®—å­è®¾è®¡ä¼šæŠŠç®—å­æ‹†çš„éå¸¸çš„ç»†ï¼Œè¿™å¯¼è‡´æœ€ç»ˆå‡ºæ¥çš„è®¡ç®—å›¾å¯èƒ½æ˜¯éå¸¸åºå¤§çš„ï¼Œè¿™åˆéœ€è¦å¼•å…¥ simplifier å»ç®€åŒ–è®¡ç®—å›¾ã€‚ä½œä¸ºä¸­é—´è¡¨ç¤ºï¼Œæˆ‘è®¤ä¸ºè¿˜æ˜¯ç”¨ MLIR è¿™ç§é€šç”¨ IR æ¥è¡¨ç¤ºæ¯”è¾ƒå¥½ï¼Œæ¯•ç«Ÿå¯ä»¥å¤ç”¨å¾ˆå¤šçš„ä¸œè¥¿ã€‚å½“ç„¶ ONNX ç›®å‰è¿˜æ˜¯æ¯”è¾ƒæµè¡Œçš„æ–¹æ³•ã€‚</description>
    </item>
    
    <item>
      <title>æµ…ææœºå™¨å­¦ä¹ ä¸­çš„å¹¶è¡Œæ¨¡å‹å’Œè‡ªåŠ¨å¹¶è¡Œæ–¹æ³•</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/introduction_mldistri/</link>
      <pubDate>Tue, 02 May 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/introduction_mldistri/</guid>
      <description>äººå·¥æ™ºèƒ½é¢†åŸŸçš„è®¸å¤šæœ€æ–°è¿›å±•éƒ½å›´ç»•ç€å¤§è§„æ¨¡ç¥ç»ç½‘ç»œå±•å¼€ï¼Œä½†è®­ç»ƒå¤§è§„æ¨¡ç¥ç»ç½‘ç»œæ˜¯ä¸€é¡¹è‰°å·¨çš„å·¥ç¨‹å’Œç ”ç©¶æŒ‘æˆ˜ï¼Œéœ€è¦åè°ƒGPUé›†ç¾¤æ¥æ‰§è¡Œå•ä¸ªåŒæ­¥è®¡ç®—ã€‚éšç€é›†ç¾¤æ•°å’Œæ¨¡å‹è§„æ¨¡çš„å¢é•¿ï¼Œæœºå™¨å­¦ä¹ ä»ä¸šè€…å¼€å‘äº†å¤šé¡¹æŠ€æœ¯ï¼Œè®©æœºå™¨å­¦ä¹ æ¨¡å‹èƒ½åœ¨å¤šä¸ªGPUä¸Šè¿›è¡Œå¹¶è¡Œæ¨¡å‹è®­ç»ƒã€‚
ä¹ä¸€çœ‹ï¼Œè¿™äº›å¹¶è¡ŒæŠ€æœ¯ä»¤äººç”Ÿç•ï¼Œä½†åªéœ€å¯¹è®¡ç®—ç»“æ„è¿›è¡Œä¸€äº›å‡è®¾ï¼Œè¿™äº›æŠ€æœ¯å°±ä¼šå˜å¾—æ¸…æ™°ï¼šä»æŸäº›è§’åº¦æ¥çœ‹ï¼Œè¿™ä¹Ÿåªæ˜¯ä» A åˆ° B ä¼ é€’å¹¶ä¸é€æ˜çš„ä½ï¼Œå°±åƒæ•°æ®åŒ…åœ¨ç½‘ç»œäº¤æ¢æœºä¹‹é—´ä¼ é€’ä¸€æ ·ã€‚
å„ç§ Parallel æ¨¡å‹ ä¸åŒçš„å¹¶è¡ŒæŠ€æœ¯å°†è®­ç»ƒè¿‡ç¨‹åˆ’åˆ†ä¸ºä¸åŒçš„ç»´åº¦ï¼ŒåŒ…æ‹¬ï¼š
æ•°æ®å¹¶è¡Œï¼ˆData Parallelismï¼‰åœ¨ä¸åŒçš„GPUä¸Šè¿è¡ŒåŒä¸€æ‰¹æ•°æ®çš„ä¸åŒå­é›† DPï¼ˆData Parallelï¼‰ DDPï¼ˆDistributed Data Parallelï¼‰ FSDPï¼ˆFully Shared Data Parallelï¼‰ æµæ°´å¹¶è¡Œï¼ˆPipeline Parallelismï¼‰åœ¨ä¸åŒçš„GPUä¸Šè¿è¡Œæ¨¡å‹çš„ä¸åŒå±‚ æ¨¡å‹å¹¶è¡Œï¼ˆTensor Parallelismï¼‰å°†å•ä¸ªæ•°å­¦è¿ç®—ï¼ˆå¦‚çŸ©é˜µä¹˜æ³•ï¼‰æ‹†åˆ†åˆ°ä¸åŒçš„GPUä¸Šè¿è¡Œ ä¸“å®¶æ··åˆï¼ˆMixture-of-Expertsï¼‰åªç”¨æ¨¡å‹æ¯ä¸€å±‚ä¸­çš„ä¸€å°éƒ¨åˆ†æ¥å¤„ç†æ•°æ®ã€‚ Noteï¼šTensor Parallelism ç¿»è¯‘æˆæ¨¡å‹å¹¶è¡Œå¯èƒ½å¹¶ä¸æ˜¯éå¸¸çš„æ°å½“ğŸ¤£
1. å¹¶è¡Œæ¨¡å‹ 1.1 æ•°æ®å¹¶è¡Œ ï¼ˆData Parallesimï¼‰ æ•°æ®å¹¶è¡Œæ˜¯æŒ‡å°†ç›¸åŒçš„å‚æ•°å¤åˆ¶åˆ°å¤šä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸ºæ¯ä¸ªå·¥ä½œèŠ‚ç‚¹åˆ†é…ä¸åŒçš„æ•°æ®å­é›†åŒæ—¶è¿›è¡Œå¤„ç†ã€‚æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹æ‹¥æœ‰å®Œæ•´çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œæ¯æ¬¡è®­ç»ƒä»…å°†ä¸€æ‰¹æ•°æ®è¾“å…¥æ¨¡å‹ï¼Œè¿›è¡Œå‰å‘ä¼ æ’­ã€è®¡ç®—è¯¯å·®ã€åå‘ä¼ æ’­ï¼Œæœ€åè¿›è¡Œå‚æ•°çš„æ›´æ–°ã€‚å‚¨äº†å‚æ•°çš„æ›´æ–°ï¼Œå…¶ä½™çš„æ“ä½œéƒ½æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šè¿›è¡Œå¹¶å‘çš„æ‰§è¡Œã€‚
æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹éƒ½æœ‰è‡ªå·±çš„æ¨¡å‹å’Œè¾“å…¥ï¼Œå½“å±äºè‡ªå·±çš„æ¨¡å‹å‚æ•°æ¨ç†å®Œæˆåï¼ˆäº§ç”Ÿäº†æ¢¯åº¦å‚æ•°ï¼‰ï¼Œæ‰€æœ‰çš„å·¥ä½œèŠ‚ç‚¹ä¼šæŠŠå‚æ•°ï¼ˆæ¢¯åº¦å‚æ•°ï¼‰å‘ç»™ä¸€ä¸ª Masterï¼Œè¿™ä¸ª Master ä¼šæŠŠæ‰€æœ‰èŠ‚ç‚¹ä¼ è¿›æ¥çš„å‚æ•°åšèåˆï¼Œé€šè¿‡è¿™äº›æ¢¯åº¦å‚æ•°æ›´æ–°ç”Ÿæˆæ–°çš„æ¨¡å‹å‚æ•°ï¼Œç„¶åæŠŠè¿™ä¸ªæ¨¡å‹çš„å‚æ•°å†å‘é€ç»™æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ï¼Œæ‹±ä»–ä»¬è¿›è¡Œä¸‹ä¸€è½®çš„è®¡ç®—ã€‚
åœ¨ Pytorch ä¸­æä¾›äº†DPï¼ˆData Parallelï¼‰ã€DDPï¼ˆDistributed Data Parallelï¼‰ã€FSDPï¼ˆFully Shared Data Parallelï¼‰ä¸‰ç§ä¸åŒçš„æ•°æ®å¹¶è¡Œæ–¹æ³•ã€‚
1.1.1 DPï¼ˆData Parallelï¼‰Parameter Server DP ä½¿ç”¨äº† Parameter Serverï¼ˆPSï¼‰ ä½œä¸ºç†è®ºä¾æ®ã€‚PS ç»“æ„æ˜¯ææ²è€å¸ˆæå‡ºæ¥çš„æ–¹æ³•ï¼Œç”±serverèŠ‚ç‚¹å’ŒworkerèŠ‚ç‚¹ç»„æˆã€‚
[ç‚¹å‡»æŠ˜å ] ææ²è€å¸ˆçš„ PS è®²è§£ Server èŠ‚ç‚¹çš„ä¸»è¦åŠŸèƒ½æ˜¯åˆå§‹åŒ–å’Œä¿å­˜æ¨¡å‹å‚æ•°ã€æ¥å—workerèŠ‚ç‚¹è®¡ç®—å‡ºçš„å±€éƒ¨æ¢¯åº¦ã€æ±‡æ€»è®¡ç®—å…¨å±€æ¢¯åº¦ï¼Œå¹¶æ›´æ–°æ¨¡å‹å‚æ•°ã€‚
Parameter Server Worker èŠ‚ç‚¹çš„ä¸»è¦åŠŸèƒ½æ˜¯å„è‡ªä¿å­˜éƒ¨åˆ†è®­ç»ƒæ•°æ®ï¼Œåˆå§‹åŒ–æ¨¡å‹ï¼Œä» Server èŠ‚ç‚¹æ‹‰å–ï¼ˆPullï¼‰æœ€æ–°çš„æ¨¡å‹å‚æ•°ï¼Œå†è¯»å–å‚æ•°ï¼Œæ ¹æ®è®­ç»ƒæ•°æ®è®¡ç®—å±€éƒ¨æ¢¯åº¦ï¼Œä¸Šä¼ ï¼ˆPushï¼‰ç»™ Server èŠ‚ç‚¹ã€‚psï¼šææ²è€å¸ˆè¯´è¿™ä¸ª Pull å’Œ Push å«æ³•æ¥æºäº Gitã€‚</description>
    </item>
    
    <item>
      <title>CUDA: NSight System</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/cuda_nsight_system/</link>
      <pubDate>Tue, 18 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/cuda_nsight_system/</guid>
      <description>NSight System Document
WSL 2 çš„ cudaMallocHost() ä¸èƒ½æ­£å¸¸ç”³è¯·åˆ° VM çš„å†…å­˜ã€‚ä¹Ÿè®¸æ˜¯ WSL 2 ä¸Šçš„ cuda æ˜¯ ubuntu20.04 çš„ç‰ˆæœ¬ï¼Œä¸æ˜¯ WSL 2 ç‰¹ä¾›ç‰ˆã€‚WSL 2 çš„ cuda ä¹Ÿæœ‰ä¸€äº›é™åˆ¶ï¼Œè¯¦ç»†è§ WSL2 User guide ã€‚
1. ä»€ä¹ˆæ˜¯ Nsight System æˆ‘ä»¬å…ˆçœ‹ä¸‹ Nsight System å®˜ç½‘å¯¹è¯¥å·¥å…·çš„æè¿°ï¼š
NVIDIA Nsightâ„¢ Systems is a system-wide performance analysis tool designed to visualize an applicationâ€™s algorithms, help you identify the largest opportunities to optimize, and tune to scale efficiently across any quantity or size of CPUs and GPUs, from large servers to our smallest system on a chip (SoC).</description>
    </item>
    
    <item>
      <title>HPC &amp; AI å…¥å‘</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/about/hpc_ai/</link>
      <pubDate>Sun, 02 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/about/hpc_ai/</guid>
      <description>1. å‰ç½®çŸ¥è¯† å¯¹äºå‰ç½®çŸ¥è¯†ï¼Œé»˜è®¤å·²ç»é€šè¿‡äº† MIT 6.S081 å³ä»¥ä¸Šéš¾åº¦çš„ OS è¯¾ç¨‹å†ç»ƒï¼›æœ‰ Deep Learning æ–¹é¢çš„è¯¾ç¨‹åŸºç¡€æˆ–è€…ç§‘ç ”ç»å†ï¼›åœ¨ä½“ç³»ç»“æ„ä¸Šæœ‰ä¸€å®šçš„äº†è§£(ä» CSAPP åˆ°è®¡ç»„å­¦å®Œ)ã€‚å¯¹äº C++ ç¼–ç¨‹è¾ƒä¸ºç†Ÿç»ƒï¼Œèƒ½å¤Ÿä½¿ç”¨ CMake æ„å»ºä¸­å‹é¡¹ç›®ï¼›èƒ½å¤Ÿä½¿ç”¨ Pybindï¼Œå¯¹äº Python é«˜çº§ç¼–ç¨‹è¾ƒä¸ºç†Ÿç»ƒã€‚åœ¨ç¼–è¯‘å·¥å…·é“¾(Clang, LLVM) ä¸Šæœ‰ä¸€å®šçš„äº†è§£ï¼Œèƒ½å¤Ÿä½¿ç”¨ã€‚å¯¹ CUDA ç¼–ç¨‹æ¨¡å‹æœ‰äº†è§£ï¼Œä¸è¦æ±‚ä½¿ç”¨ã€‚
1.1 Courses 1.1.1 CMU15418 Parallel computing Note: 2023 çš„è§†é¢‘æ²¡æœ‰å…¬å¼€ï¼Œç›®å‰èƒ½å¤Ÿæ‰¾åˆ°çš„æœ€æ–°çš„è§†é¢‘æ˜¯ 2018 å¹´çš„ï¼Œè¿™ä¸ªé¢†åŸŸå‘å±•è¾ƒå¿«ï¼Œåˆæ¬¡å…¥é—¨è¿˜æ˜¯é€‰æ‹© CS267ã€‚
Spring 2023 Homepage
å¹¶è¡Œè®¡ç®—å…¥é—¨è¯¾ç¨‹ï¼ŒLab å·¥ä½œé‡éå¸¸çš„å·¨å¤§ã€‚æ¶‰åŠç°ä»£å¤šå¤„ç†å™¨ï¼ŒSIMDï¼Œåˆ†å¸ƒå¼é€šè®¯åè®®MPIï¼ŒGPUåŠ é€ŸCUDAç¼–ç¨‹ï¼Œå¼‚æ„è®¡ç®—ï¼ŒåŒæ­¥ï¼ŒCacheï¼Œç­‰ã€‚
1.1.2 UCB CS267 Applications of Parallel Computers Spring 2022 Homepage
1.1.3 Stanford 143: Compilers Homepage
ç°åœ¨æœ‰å¾ˆå¤šçš„è‡ªåŠ¨å¹¶è¡Œåšæ³•æƒ³è¦ä½¿ç”¨ç¼–è¯‘æŠ€æœ¯æ¥ç»Ÿä¸€çš„ç”Ÿæˆè°ƒåº¦ä»£ç å’Œä¼˜åŒ–åçš„ kernelï¼Œç¼–è¯‘æŠ€æœ¯æ˜¯å€¼å¾—å­¦ä¹ çš„ã€‚ä½†æ˜¯è¿™é—¨è¯¾æ˜¯ä¼ ç»Ÿç¼–è¯‘ï¼Œå’Œ MLIR é‚£ä¸€å¥—çš„åç«¯æ˜¯æœ‰å…±æ€§ä½†æ˜¯ä¸æ˜¯ä¸€è‡´çš„ï¼Œå»ºè®®åªçœ‹ç¼–è¯‘å‰ç«¯éƒ¨åˆ†ï¼Œåç«¯éƒ¨åˆ†å¯ä»¥è¾ƒä¸ºç®€ç•¥çš„æ¥çœ‹ã€‚
1.2 Tools 1.2.1 CUDA 2023-04-18, CUDA: NSight System, link 2. Machine Learning System 2023-05-02, æµ…ææœºå™¨å­¦ä¹ ä¸­çš„å¹¶è¡Œæ¨¡å‹å’Œè‡ªåŠ¨å¹¶è¡Œæ–¹æ³•, link </description>
    </item>
    
    <item>
      <title>XV6 Lab 5: Copy On Write</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab5_cow/</link>
      <pubDate>Fri, 17 Mar 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab5_cow/</guid>
      <description>xv6 ä¸­çš„ fork() ç³»ç»Ÿè°ƒç”¨å°†çˆ¶è¿›ç¨‹çš„æ‰€æœ‰ç”¨æˆ·ç©ºé—´å†…å­˜å¤åˆ¶åˆ°å­è¿›ç¨‹ä¸­ã€‚å¦‚æœçˆ¶è¿›ç¨‹å¾ˆå¤§ï¼Œå¤åˆ¶å¯èƒ½éœ€è¦å¾ˆé•¿çš„æ—¶é—´ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¿™é¡¹å·¥ä½œé€šå¸¸æ˜¯æ— ç”¨çš„ï¼šfork() ä¹‹åé€šå¸¸æ˜¯å­è¿›ç¨‹çš„ exec()ï¼Œå®ƒæ”¾å¼ƒäº†å¤åˆ¶çš„å†…å­˜ï¼Œæ²¡æœ‰ä½¿ç”¨å¤åˆ¶è¿‡æ¥çš„å¤§éƒ¨åˆ†å†…å­˜ã€‚å¦‚æœçˆ¶ä»£å’Œå­ä»£éƒ½ä½¿ç”¨äº†å¤åˆ¶çš„é¡µé¢ï¼Œå¹¶ä¸”å…¶ä¸­ä¸€ä¸ªæˆ–ä¸¤ä¸ªéƒ½å†™äº†å®ƒï¼Œé‚£ä¹ˆè¿™ä¸ªå¤åˆ¶æ‰æ˜¯çœŸæ­£éœ€è¦çš„ã€‚
æ‰€ä»¥å†™æ—¶å¤åˆ¶(copy on write, cow) è¿™ä¸ªæŠ€æœ¯å˜å¾—ååˆ†çš„é‡è¦ã€‚åœ¨è¿™ä¸ª lab ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå†™æ—¶å¤åˆ¶çš„ fork()ã€‚æˆ‘ä»¬éœ€è¦ä¿®æ”¹åŸæœ¬çš„ fork() ç¨‹åºä¸­åšå†…å­˜ç”³è¯·çš„æ¨¡å—ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦å®ç° usertrap æ¥åœ¨å†™æ—¶(åœ¨å®é™…å†™çš„æ—¶å€™ç¢°åˆ° cow flagï¼ŒæŠ›å‡ºåˆ†é¡µé”™è¯¯)çš„æ—¶å€™å¤„ç†è¿™ä¸ª trapã€‚
å› ä¸ºä¸€ä¸ªç¨‹åºå¾ˆå¯èƒ½è¢« fork() äº†å¾ˆå¤šçš„åˆ†æ”¯ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè®¡æ•°å™¨æ¥ç¡®å®šè¿™ä¸ª page æ˜¯è¦è¢«é‡Šæ”¾è¿˜æ˜¯ä¿ç•™ã€‚
ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªæ­£å¸¸è¿è¡Œçš„ç¨‹åºåœ¨å†™æ—¶å¤åˆ¶çš„æ—¶å€™ä¼šæœ‰ä¸‹é¢å‡ ä¸ªæµç¨‹:
fork() å‡ºä¸€ä¸ªå­è¿›ç¨‹ childã€‚ child æ‹¥æœ‰çˆ¶è¿›ç¨‹çš„é¡µçš„å¼•ç”¨ï¼Œå¹¶ä¸”é¡µçš„ flag æœ‰ cow æ ‡è¯†ã€‚ å¹¶ä¸”è¦æŠŠ é¡µ å¼•ç”¨ ++ child éœ€è¦å‘è‡ªå·±çš„é¡µä¸­å†™å…¥æ–°çš„æ•°æ®. æ­¤æ—¶éœ€è¦é‡æ–°åˆ†é…å†…å­˜ï¼Œé¡µå¼•ç”¨ &amp;ndash;ã€‚ å½“ child è¿”å›çš„æ—¶å€™ï¼Œå¯èƒ½æœ‰å†…å­˜éœ€è¦ç”± kernel è½¬æ¢åˆ° userã€‚ å½“çˆ¶è¿›ç¨‹é”€æ¯çš„æ—¶å€™ï¼Œå¦‚æœè®¡æ•°å™¨ä¸º 0ï¼Œåˆ™é”€æ¯ï¼Œåä¹‹ï¼Œä¸å˜ã€‚ æ¯ä¸€é¡µéƒ½éœ€è¦ä¸€ä¸ªè®¡æ•°å™¨æ¥è¿›è¡Œè®¡æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ kernel ä¸­åŠ å…¥ä¸€ä¸ªæ•°ç»„æ¥è®°å½•ï¼ŒæŸ¥é˜… xv6 bookï¼Œæˆ‘ä»¬å‘ç°æœ‰å¦‚ä¸‹çš„å›¾:
Fig 1. memlayoutæˆ‘ä»¬éœ€è¦åœ¨ kernel data ä¹‹åçš„åŒºåŸŸå†…ç”³è¯·ä¸€å—å†…å­˜æ¥ä½œä¸ºè®¡æ•°å™¨å­˜å‚¨çš„æ•°ç»„ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ kalloc.c ä¸­å®ç°ã€‚
// ./kernel/kalloc.c struct { struct spinlock lock; struct run *freelist; // lab 5 uint* ref_cnt; struct spinlock ref_cnt_lock; char * pa_start; } kmem; åœ¨è¿™ä¸ª kmem ç»“æ„ä½“ä¸­åŠ å…¥äº†ä¸€ä¸ª ref_cnt_lock æ¥ä¿è¯è®¡æ•°å™¨çš„æ­£ç¡®å¼•ç”¨ã€‚ä¸€ä¸ª ref_cnt pointer æ¥æŒ‡ç¤º ref array çš„èµ·å§‹ä½ç½®ï¼Œä½¿ç”¨ pa_start æ¥è¡¨ç¤ºå®é™…çš„ free memory çš„èµ·å§‹ä½ç½®ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹åˆå§‹åŒ–ç¨‹åºæ¥æ­£ç¡®çš„ç”³è¯·è®¡æ•°å™¨æ•°ç»„ï¼Œå¹¶ä¸”å¯¹ free memory å¡«å……ä¸Šä¸€ä¸ªåˆå§‹å€¼ã€‚</description>
    </item>
    
    <item>
      <title>XV6 Lab 4: Traps</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab4_trap/</link>
      <pubDate>Sun, 05 Mar 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab4_trap/</guid>
      <description>RISC-V assembly Which registers contain arguments to functions? For example, which register holds 13 in main&amp;rsquo;s call to printf?
Register: a0, a1, a2&amp;hellip;, a7 for integer arguments. Register fa0, fa1, fa2&amp;hellip;, fa7 for float arguments.
Register a2 holds 13 when we call printf().
Where is the call to function f in the assembly code for main? Where is the call to g? (Hint: the compiler may inline functions.)
Compiler inlined f(8) and g() in printf() function.</description>
    </item>
    
    <item>
      <title>XV6 Lab 3: Page Table</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab3_pagetable/</link>
      <pubDate>Thu, 02 Mar 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab3_pagetable/</guid>
      <description>MIT 6.S081 Lab3 website
åš Lab 3 éœ€è¦æå‰é˜…è¯» XV6 bookï¼Œäº†è§£ RISC-V SR39 çš„åœ°å€æ ¼å¼ï¼Œå¹¶ä¸”å®éªŒä¸­å¤§é‡ç”¨åˆ°äº†é¡µè¡¨çš„å‡†æ¢å‡½æ•°ï¼Œéœ€è¦æŸ¥é˜… XV6 æ‰‹å†Œã€‚ä¸è¿‡ï¼Œç†Ÿè®° RISC-V çš„åœ°å€è¯´å®åœ¨çš„æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ï¼Œé€šè¿‡è¿™ä¸ªå®éªŒç†è§£é¡µè¡¨çš„å·¥ä½œæ–¹å¼å¹¶ä¸” hands on æ‰æ˜¯çœŸçš„ã€‚
Speed up system calls ç›®å‰æœ‰å¾ˆå¤šçš„æ“ä½œç³»ç»Ÿ(Linux)åœ¨ç”¨æˆ·åŒºå’Œå†…æ ¸åŒºä¹‹é—´å…±äº«ä¸€å—æ•°æ®(Read-Only for user)ï¼Œè¿™æ ·ç”¨æˆ·åœ¨è¿›è¡Œç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™å°±ä¸éœ€è¦é™·å…¥å†…æ ¸æ€åï¼Œç”±å†…æ ¸æ€æ‹·è´æ•°æ®è¿›ç”¨æˆ·æ€ï¼Œè€Œæ˜¯å°†æ•°æ®å†™åœ¨è¿™ä¸ªå…±äº«çš„åŒºå—å†…ã€‚è¿™æ ·å¯ä»¥åŠ å¿«æ“ä½œç³»ç»Ÿçš„è¿è¡Œé€Ÿåº¦(æ¯•ç«Ÿå¤§éƒ¨åˆ†ç³»ç»Ÿè°ƒç”¨éœ€è¦çš„å†…å­˜æ¶ˆè€—æ˜¯å¾ˆå°çš„ï¼Œå†…å­˜çš„æ¶ˆè€—åœ¨å½“ä»Šå·²ç»ä¸æ˜¯é—®é¢˜)ã€‚
åœ¨æœ¬å®éªŒä¸­æˆ‘ä»¬éœ€è¦ä½¿ç”¨ ugetpid() æ¥è¿›è¡ŒåŠ é€Ÿè·å¾—è¿›ç¨‹çš„ pidã€‚
é¦–å…ˆå°±æ˜¯ä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºä¸€ä¸ªé¡µè¡¨ä½œä¸ºå…±äº«å†…å­˜åŒºå—ã€‚æˆ‘ä»¬å‘ç°åœ¨ kernel\memlayout.h ä¸­å·²ç»ä¸ºæˆ‘ä»¬å®šä¹‰å¥½äº†éœ€è¦çš„æ•°æ®ç»“æ„:
struct usyscall { int pid; // Process ID }; é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨ kernel/proc.c /proc.h ä¸­åŠ å…¥ä»£ç ï¼Œæ¥å®ç°è¿›ç¨‹åˆ›å»ºæ—¶åˆ›å»ºé¡µè¡¨ï¼Œé”€æ¯æ—¶é”€æ¯é¡µè¡¨çš„åŠ¨ä½œå°±è¡Œäº†ã€‚
åœ¨ proc.h ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¿›ç¨‹çš„ PCB ä¸­åŠ å…¥æ–°çš„æ•°æ®ç»“æ„:
struct proc { ... struct usyscall *usyscall; // using read only shared data to accelerate. ... } ä¸ºäº†è®©è¿›ç¨‹çš„æ­£å¸¸åˆ›å»ºå’Œé‡Šæ”¾ï¼Œæˆ‘ä»¬éœ€è¦å‘è¿›ç¨‹åˆ›å»ºå’Œé”€æ¯å‡½æ•°ä¸­åŠ å…¥å¯¹åº”çš„é¡µè¡¨æ“ä½œä»£ç ã€‚</description>
    </item>
    
    <item>
      <title>XV6 Lab 2: syscall</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab2_syscall/</link>
      <pubDate>Sat, 25 Feb 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab2_syscall/</guid>
      <description>MIT 6.S081 Lab2 website
ä¸ºäº†å®Œæˆ Syscall ä½œä¸šï¼Œéœ€è¦é˜…è¯»:
XV6-book, Chapter 2, Sections 4.3 and 4.4
files: user/user.h, kernel/proc.c kernel/proc.h, kernel/syscall.c kernel/syscall.h
system call tracing system call tracing éœ€è¦æˆ‘ä»¬è¡¥å…… kernel ä¸­çš„ä¸€äº›ç¨‹åºï¼Œå°†æŸç¨‹åºä¸­æŒ‡å®šçš„ system call æ‰“å°å‡ºæ¥ã€‚å½“ç„¶ï¼Œè¿™éœ€è¦æˆ‘ä»¬æ–°å¢ä¸€ä¸ª system_trace ç³»ç»Ÿè°ƒç”¨å‡½æ•°ã€‚é¢˜ä¸­ï¼Œç»™å®šçš„ tracing ç¨‹åºä»¥ trace [system-call-number] [cmd] çš„æ–¹å¼è¿è¡Œã€‚æˆ‘ä»¬é¦–å…ˆå»çœ‹ user/trace.c ä¸­çš„å†…å®¹ï¼Œçœ‹çœ‹ system call number æ˜¯æ€ä¹ˆä¼ å…¥ç³»ç»Ÿè°ƒç”¨çš„ã€‚
user/trace.c çš„ç¨‹åºå¦‚ä¸‹æ‰€ç¤º:
int main(int argc, char *argv[]) { int i; char *nargv[MAXARG]; if(argc &amp;lt; 3 || (argv[1][0] &amp;lt; &amp;#39;0&amp;#39; || argv[1][0] &amp;gt; &amp;#39;9&amp;#39;)){ fprintf(2, &amp;#34;Usage: %s mask command\n&amp;#34;, argv[0]); exit(1); } if (trace(atoi(argv[1])) &amp;lt; 0) { fprintf(2, &amp;#34;%s: trace failed\n&amp;#34;, argv[0]); exit(1); } for(i = 2; i &amp;lt; argc &amp;amp;&amp;amp; i &amp;lt; MAXARG; i++){ nargv[i-2] = argv[i]; } exec(nargv[0], nargv); exit(0); } æˆ‘ä»¬å‘ç°è¿™ä¸ªç¨‹åºç›´æ¥ä½¿ç”¨äº† trace ç³»ç»Ÿè°ƒç”¨æ¥å®ç°ã€‚æ‰€ä»¥æ¥ä¸‹æ¥çš„ä»»åŠ¡æ˜¯è¿›è¡Œ trace ç³»ç»Ÿè°ƒç”¨çš„å®ç°ã€‚å†æ¬¡å›é¡¾ Lab 1 ä¸­çš„å†…å®¹ï¼Œåœ¨ Lab 1 ä¸­æˆ‘ä»¬åˆ†æç³»ç»Ÿè°ƒç”¨æ˜¯é€šè¿‡åœ¨ usys.</description>
    </item>
    
    <item>
      <title>XV6 Lab 1: Xv6 and Unix utilities</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab1_utility/</link>
      <pubDate>Thu, 23 Feb 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab1_utility/</guid>
      <description>MIT 6.S081 Lab1 website
æœ¬ç« èŠ‚çš„å®éªŒæ˜¯ä¸ºäº†ç†Ÿæ‚‰ XV6 ç¯å¢ƒå’Œ interface è€Œå‡†å¤‡çš„ã€‚åŒ…å«äº† interface è°ƒç”¨ã€å¤šè¿›ç¨‹ç¼–ç¨‹ã€Pipelineã€‚
é˜…è¯» book-riscv-ref3 ç†Ÿæ‚‰ XV6 çš„ç³»ç»Ÿç»„ç»‡å½¢å¼
sleep é€šè¿‡è°ƒç”¨ user.h ä¸­çš„ç³»ç»Ÿè°ƒç”¨å‡½æ•°æ¥å®Œæˆ sleep ç¨‹åºã€‚ä¸»è¦æ˜¯ä¸ºäº†ä»‹ç» ç³»ç»Ÿè°ƒç”¨ çš„å·¥ä½œæ–¹å¼ã€‚
/** * @author chenghua.wang * @brief Lab1-utilities. sleep prog using syscall. * @time Feb 23, 2023 * */ #include &amp;#34;kernel/types.h&amp;#34; #include &amp;#34;kernel/stat.h&amp;#34; #include &amp;#34;user/user.h&amp;#34; int main(int argc, char *argv[]){ if (argc != 2){ printf(&amp;#34;[ error ] you should follow anw integer with sleep prog to indicate ticks times!</description>
    </item>
    
    <item>
      <title>The Design of a Practical System for Fault-Tolerant Virtual Machines</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/papers/ft-vm/</link>
      <pubDate>Thu, 19 Jan 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/papers/ft-vm/</guid>
      <description>go back to home
Paper link
ACM SIGOPS Operating Systems Review, 2010, 44(4): 30-39.
Last Edit: Jan 19, 2023
Introduction æ˜¯çš„ï¼Œè¿™èŠ‚å†…å®¹è¿˜æ˜¯ FT(fault-tolerance)ã€‚ç°åœ¨åš FT ä¸»è¦æœ‰ä¸¤ç§æ‰‹æ®µ[2]ï¼š
State transfer Primaryç”¨æ¥æ‰§è¡Œæ‰€æœ‰çš„ä»»åŠ¡ï¼ŒPrimaryå‘é€è¯¥æœºå™¨çš„æ‰€æœ‰çŠ¶æ€(æ‰€æœ‰çš„å†…å­˜å˜åŠ¨ï¼Œæ‰€æœ‰çš„ç£ç›˜å˜åŠ¨ï¼Œç­‰)ç»™Replicaã€‚State Transfer è™½ç„¶å¬èµ·æ¥éå¸¸çš„ç®€å•(å®é™…ä¸Šåšèµ·æ¥ä¹Ÿæ˜¯çš„ï¼Œç›¸å¯¹äºReplicated state machine)ï¼Œä½†æ˜¯éœ€è¦å ç”¨éå¸¸å¤§é‡çš„ç½‘ç»œå¸¦å®½æ¥å®ç°ã€‚
å°½ç®¡å¦‚æ­¤(å ç”¨å¤§é‡çš„ç½‘ç»œèµ„æºï¼Œå¯¼è‡´ä¼ è¾“ç¼“æ…¢)ï¼ŒState Transferæ˜¯å¯¹å¤šå¤„ç†å™¨å‹å¥½çš„ä¸€ç§æ–¹å¼ï¼Œè€ŒReplicated state machineåˆ™ä¸æ˜¯ã€‚
Replicated state machine Client å‘ Primary å‘é€æ“ä½œå’Œæ•°æ®(inputs)ã€‚PrimaryæŠŠè¿™äº›æ“ä½œå’Œæ•°æ®å‘é€ç»™Replicasï¼ŒReplicaså’ŒPrimaryéƒ½ä¼šæ‰§è¡Œè¿™äº›æŒ‡ä»¤ï¼Œéƒ½ä¼šå—åˆ°è¿™äº›æ•°æ®(inputs)ï¼Œæ‰€æœ‰çš„æŒ‡ä»¤éƒ½ä»¥åŒæ ·çš„é¡ºåºæ‰§è¡Œï¼Œåªè¦Primaryå’ŒReplicasåˆå§‹çš„çŠ¶æ€æ˜¯ä¸€è‡´çš„ï¼Œé‚£ä¹ˆäºŒè€…å°±ä¸€ç›´ä¿æŒç€åŒæ­¥(ä¹Ÿæ„å‘³ç€deterministic)ã€‚
åœ¨å¹¶è¡ŒåŒ–çš„åº”ç”¨ä¸­ï¼ŒState transfer æ˜¯é¦–é€‰ï¼Œæ¯•ç«Ÿåœ¨å¹¶è¡Œçš„æ—¶å€™ï¼Œå¹¶è¡Œé¡ºåºå¯¹äºReplicated state machineæ¥è¯´æ˜¯å¼‚å¸¸éš¾åŒæ­¥çš„ã€‚
ä¸»ä»å¤åˆ¶æ—¶çš„æŒ‘æˆ˜[2]ï¼š
è¦å¤åˆ¶ä»€ä¹ˆçŠ¶æ€ primaryéœ€è¦ç­‰å¾…backupå— ä»€ä¹ˆæ—¶å€™éœ€è¦åˆ‡æ¢åˆ°backup åˆ‡æ¢çš„æ—¶å€™å¼‚å¸¸æƒ…å†µæ˜¯å¦èƒ½çœ‹åˆ° å¦‚ä½•æé«˜åˆ›å»ºæ–°backupçš„é€Ÿåº¦ VM-FTä½¿ç”¨çš„å°±æ˜¯Replicated state machineçš„æ–¹æ³•ã€‚ä¸ºäº†èƒ½å¤Ÿæ•è·æ•°æ®ï¼Œå¹¶ä¸”åšå‡ºä¸€äº›è½¯ä»¶ä¸­æ–­ï¼ŒPrimaryå’ŒBackupéƒ½æ˜¯åœ¨VMä¸Šè¿è¡Œçš„ï¼Œç”±hypervisoræ¥ç®¡ç†ä»–ä»¬ã€‚
Arch VM-FT æ€»ä½“çš„ç»“æ„è¾ƒä¸ºç®€å•ï¼Œè®ºæ–‡ä¸­æ˜¯ä¸€ä¸»ä¸€ä»çš„ç»“æ„ã€‚VM-FTä¸»è¦ä¾èµ–äº Deterministic replay(ç¡®å®šæ€§é‡æ”¾)ã€‚VM-FT é€šè¿‡ç¡®å®šæ€§é‡æ”¾æ¥äº§ç”Ÿç›¸å…³çš„æ—¥å¿—æ¡ç›®ï¼Œä½†ä¸å°†æ—¥å¿—å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯é€šè¿‡ logging channel å‘é€ç»™backup(è¿™é‡ŒæŒ‡å¤‡ç”¨æœº)ã€‚backupå®æ—¶é‡æ”¾æ—¥å¿—é¡¹ã€‚
å› ä¸ºä¸€åˆ‡éƒ½æ˜¯åœ¨ logging channel ä¸ŠåšåŒæ­¥çš„ã€‚ä¸ºäº†å®¹é”™ï¼Œå¿…é¡»åœ¨ logging channel ä¸Šå®ç°ä¸¥æ ¼çš„å®¹é”™åè®®ï¼Œæœ‰ä»¥ä¸‹è¦æ±‚ï¼š</description>
    </item>
    
    <item>
      <title>Google File System(GFS)</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/papers/gfs/</link>
      <pubDate>Wed, 18 Jan 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/papers/gfs/</guid>
      <description>go back to home
Paper link
Proceedings of the 19th ACM Symposium on Operating Systems Principles, ACM, Bolton Landing, NY (2003), pp. 20-43
Last Edit: Jan 18, 2023
GFS æœ‰éå¸¸å¤šçš„ä¸œè¥¿ï¼Œè¿™é‡Œåªå†™äº†ä¸€äº›é‡è¦çš„éƒ¨åˆ†ã€‚åƒæ˜¯snapshotï¼Œæ–‡ä»¶åˆ é™¤ï¼Œé«˜å¯ç”¨æœºåˆ¶ï¼ŒReplicaç®¡ç†ç­‰æ²¡æœ‰å…·ä½“æåŠã€‚
Introduction GFSæ˜¯googleæå‡ºçš„ä¸€ä¸ªå¯æ‰©å±•åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œä¸ºå¤§å‹åˆ†å¸ƒå¼æ•°æ®å¯†é›†å‹åº”ç”¨æä¾›æœåŠ¡ã€‚å¯ä»¥åœ¨å¤§è§„æ¨¡çš„æ¶ˆè´¹çº§æœºå™¨é›†ç¾¤ä¸Šæä¾›ä¸é”™çš„å®¹é”™èƒ½åŠ›ã€‚GFSåœ¨è®¾è®¡çš„æ—¶å€™ä¸»è¦ä¾æ®6ä¸ªå‡è®¾(è§‚å¯Ÿå¾—å‡ºçš„):
èŠ‚ç‚¹å¤±æ•ˆç»å¸¸å‘ç”Ÿã€‚ç³»ç»Ÿç”±éå¸¸å¤šçš„æ¶ˆè´¹çº§æœºå™¨ç»„æˆï¼Œå¤§é‡ç”¨æˆ·åŒæ—¶è¿›è¡Œè®¿é—®ï¼Œè¿™ä½¿å¾—èŠ‚ç‚¹å¾ˆå®¹æ˜“å› ä¸ºç¨‹åºbugã€ç£ç›˜æ•…éšœã€å†…å­˜æ•…éšœç­‰åŸå› å¤±æ•ˆã€‚ å­˜å‚¨ä»¥å¤§æ–‡ä»¶ä¸ºä¸»ã€‚æ¯ä¸ªæ–‡ä»¶é€šå¸¸100MBæˆ–å‡ GBã€‚ç³»ç»Ÿéœ€è¦æ”¯æŒå°æ–‡ä»¶ï¼Œä½†ä¸éœ€è¦å¯¹å…¶è¿›è¡Œç‰¹æ®Šçš„ä¼˜åŒ–ã€‚ å¤§å®¹é‡è¿ç»­è¯»ï¼Œå°å®¹é‡éšæœºè¯»å–æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­çš„å¸¸æ€ã€‚ å†™å…¥ä¹Ÿå·²å¤§å®¹é‡ä¸ºä¸»ï¼Œå°å®¹é‡æ— éœ€ç‰¹æ®Šä¼˜åŒ–ã€‚ æ”¯æŒåŸå­çš„æ–‡ä»¶è¿½åŠ æ“ä½œã€‚ä½¿å¾—å¤§é‡ç”¨æˆ·å¯ä»¥å¹¶è¡Œè¿½åŠ æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„åŠ é”æœºåˆ¶ã€‚ é«˜ååé‡æ¯”ä½å»¶æ—¶æ›´é‡è¦ ä¸ºä»€ä¹ˆè®¾è®¡ä¸€ä¸ªä¼˜ç§€çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿéå¸¸çš„å›°éš¾:
Performance. å½“æ•°æ®é‡éå¸¸å¤§çš„æ—¶å€™ï¼Œæ•°æ®åˆ†ç‰‡(Sharding)æ˜¯éå¸¸é‡è¦çš„ã€‚ Fault Tolerance. ä½†æ˜¯ç”±äºæ•°æ®åœ¨å¤šå°æœåŠ¡å™¨ä¸Šåˆ†ç‰‡ã€‚ç”±äºå¤šå°æœåŠ¡å™¨ï¼Œæ•´ä¸ªç³»ç»Ÿå‡ºç°æ•…éšœçš„æ¦‚ç‡ä¼šå¤§å¾ˆå¤šã€‚å› æ­¤éœ€è¦å®¹é”™æœºåˆ¶ Replication. å¤åˆ¶æ•°æ®å‰¯æœ¬åˆ°å¤šå°æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯ä¸ºäº†ç”¨æˆ·èƒ½å¤Ÿæ‹¿åˆ°ä¸€è‡´çš„æ•°æ®ï¼Œéœ€è¦è€ƒè™‘ä¸€è‡´æ€§ Consistency. ä¸ºäº†ä¸€è‡´æ€§ï¼Œä¸å¾—ä¸ä½¿ç”¨ç½‘ç»œ(ææ…¢çš„æ•°æ®äº¤äº’æ–¹å¼)è¿›è¡Œç¡®è®¤å’ŒåŒæ­¥ã€‚è¿™åˆä¼šå½±å“æ€§èƒ½(Performance)!!! ä¸–ç•Œå› æ­¤å˜æˆäº†ä¸€ä¸ªç¾å¦™çš„ç¯ã€‚:-)ã€‚è¿™ä¹Ÿæ˜¯åˆ†å¸ƒå¼çš„æŒ‘æˆ˜ä¹‹å¤„ã€‚
GFSè®¨è®ºäº†ä¸Šè¿°çš„è¿™äº›ä¸»é¢˜å’Œåœ¨å®é™…ç”Ÿäº§åœºæ™¯ä¸­çš„åº”ç”¨ã€‚
Architecture Fig 1. GFS Arch[1] ä¸€ä¸ªGFSé›†ç¾¤ç”±ä¸€ä¸ªMasterèŠ‚ç‚¹å’Œè‹¥å¹²ä¸ªChunk ServerèŠ‚ç‚¹ç»„æˆã€‚æ¯ä¸ªChunk Serverå¯ä»¥è¢«è®¸å¤šä¸ªClientè®¿é—®ã€‚GFS Chunk Serverä½œä¸ºç”¨æˆ·çº§è¿›ç¨‹åœ¨LinuxæœåŠ¡å™¨ä¸­è¿è¡Œï¼Œå¹¶ä¸”æ–‡ä»¶ç³»ç»Ÿæœ¬èº«ä½¿ç”¨çš„å°±æ˜¯Linuxç³»ç»Ÿçš„é‚£å¥—ã€‚(æ‰€ä»¥æ–‡ä¸­è¯´ï¼Œæ²¡æœ‰ç‰¹åœ°çš„ä¸ºGFS Chunk ServeråŠ å…¥cacheåŠŸèƒ½ï¼Œå› ä¸ºLinuxæ–‡ä»¶ç³»ç»Ÿå·²ç»å¹²äº†è¿™ä»¶äº‹)
Chunk: GFSä¸­çš„æ–‡ä»¶åœ¨å­˜å‚¨çš„æ—¶å€™ä¼šè¢«åˆ†å‰²æˆå¤šä¸ªChunkï¼Œæ¯ä¸ªChunkçš„å¤§å°ä¸º64MBã€‚åœ¨Chunkåˆ†é…çš„æ—¶å€™ï¼ŒMasterä¼šåˆ†é…ä¸€ä¸ªHandleç»™Chunkï¼Œç±»ä¼¼äºæŒ‡é’ˆã€‚Chunkåœ¨googleçš„å®ç°ä¸­ï¼Œä½¿ç”¨3ä»½å‰¯æœ¬ã€‚
Master: ç»´æŠ¤å…ƒæ•°æ®ï¼Œè®°å½•æ–‡ä»¶è¢«åˆ†å‰²ä¸ºå“ªäº›Chunkã€ä»¥åŠè¿™äº›Chunkçš„å­˜å‚¨ä½ç½®ï¼›å®ƒè¿˜è´Ÿè´£Chunkçš„è¿ç§»ã€é‡æ–°å¹³è¡¡(rebalancing)å’Œåƒåœ¾å›æ”¶ï¼›æ­¤å¤–ï¼ŒMasteré€šè¿‡å¿ƒè·³æœºåˆ¶ä¸ChunkServeré€šä¿¡ï¼Œå‘å…¶ä¼ é€’æŒ‡ä»¤(æ˜¯çš„ï¼Œä¹Ÿæ˜¯é€šè¿‡å¿ƒè·³æœºåˆ¶)ï¼Œå¹¶æ”¶é›†çŠ¶æ€ï¼›
Client: é¦–å…ˆå‘Masterè¯¢é—®è¯¥æ–‡ä»¶çš„Chunkåœ¨å“ªé‡Œï¼ŒChunk Serverä½ç½®ï¼Œå†ä» Chunk Serverè·å–æ•°æ®ã€‚Clientå¹¶ä¸ä¼šæ¯æ¬¡éƒ½å‘Masterå‘é€æ•°æ®è¿›è¡Œè¯¢é—®ï¼Œå®ƒä¼šcacheä¸€éƒ¨åˆ†çš„æ•°æ®(ä¸æ˜¯Chunkçš„ï¼Œæ˜¯æŸä¸ªæ–‡ä»¶å¯¹åº”çš„Chunk Serverçš„ä½ç½®ï¼Œå³Chunkçš„åœ°å€)ï¼Œå¹¶ä¸”ä¿æŒä¸€å®šçš„æ—¶é—´ã€‚</description>
    </item>
    
    <item>
      <title>MapReduce</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/papers/mapreduce/</link>
      <pubDate>Tue, 17 Jan 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/papers/mapreduce/</guid>
      <description>OSDI&#39;04: 6th Symposium on Operating Systems Design and Implementation
go back to home
Paper link
ä»€ä¹ˆæ˜¯ MapReduce åœ¨MapReduceåŸæ–‡ä¸­æ˜¯è¿™ä¹ˆè¯´çš„
MapReduce is a programming model and an associated implementation for processing and generating large data sets. [1]
è¿™æ˜¯ä¸€ä¸ªè¾ƒä¸ºç®€å•çš„å¤„ç†å¤§å‹é—®é¢˜çš„åˆ†å¸ƒå¼ç¼–ç¨‹æ¨¡å‹ã€‚å…¶äº§ç”Ÿçš„åŸå› æ˜¯å› ä¸º google æƒ³è¦è®©æ™®é€šçš„ç¨‹åºå‘˜ä¹Ÿèƒ½å¤Ÿé€šè¿‡ä¸€å¥—ç®€å•çš„ç¼–ç¨‹æ¨¡å‹æ¥ç¼–å†™åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºï¼Œä»¥æ­¤æ¥å¤„ç† google å†…éƒ¨çš„å¤§æ•°æ®ã€‚ç„¶åè‘—åçš„ Jeff Dean å’Œ Sanjay Ghemawat å‡ºé©¬æå®šäº†è¿™ä¸ªé—®é¢˜(åœ¨çŸ¥ä¹ä¸Šå…³äºJeff Deançš„è½¶äº‹:-))ã€‚MapReduce åœ¨ google å†…éƒ¨è¿è¡Œå¾ˆé•¿çš„æ—¶é—´å¹¶ä¸”å¤„ç†äº†å¾ˆå¤šä¸šåŠ¡ï¼Œä½†æ˜¯ç›®å‰ä¹Ÿè´¥ä¸‹é˜µæ¥ï¼Œå…·ä½“åŸå› å‚è§ MapReduce ç¼ºé™·ç« èŠ‚(MRæ—©åœ¨2004å¹´å°±å‡ºæ¥äº†ï¼Œå…¶å®æ˜¯å¤æ—©çš„æŠ€æœ¯äº†ï¼Œå…¶æ²¡æœ‰åœ¨æ€§èƒ½ä¸Šåšæ–‡ç« ï¼Œä¸»è¦åœ¨å¯æ‰©å±•æ€§ä¸Š)ã€‚
MapReduce çš„è®¾è®¡æ¡†æ¶å’ŒåŸºæœ¬æµç¨‹ MRå®é™…ä¸Šæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æ¡†æ¶ï¼Œæ€è·¯ä¹Ÿéå¸¸çš„ç›´ç™½ã€‚MapReduce èƒŒåçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†æ•°æ®é›†æ˜ å°„åˆ°ä¸€ä¸ª &amp;lt;key, value&amp;gt; pairçš„é›†åˆä¸­ï¼Œç„¶åä½¿ç”¨ç›¸åŒçš„é”®å¯¹æ‰€æœ‰pairè¿›è¡Œæ•´åˆã€‚ æ•´ä½“æ¦‚å¿µå¾ˆç®€å•ï¼Œä½†æ˜¯å¦‚æœä½ è®¾æƒ³ä¸‹ä¸‹é¢çš„æƒ…å†µï¼ŒMRå®é™…ä¸Šéå¸¸æœ‰ç”¨: åŸºæœ¬ä¸Šæ‰€æœ‰çš„æ•°æ®éƒ½èƒ½è¢«æ˜ å°„åˆ°ä¸€ä¸ª &amp;lt;key, value&amp;gt; å¯¹ä¸­ï¼Œå¹¶ä¸”keyå’Œvalueå¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚
åœ¨è®ºæ–‡ä¸­MRä½¿ç”¨çš„æ ·ä¾‹æ˜¯åœ¨è¶…å¤§çš„æ–‡ä»¶é‡Œåšå•è¯ç»Ÿè®¡ã€‚è¿™ä¸ªæ¡†æ¶è¿˜å¯ä»¥ç”¨æ¥åšï¼š
åˆ†å¸ƒå¼çš„æ’åº åˆ†å¸ƒå¼çš„æœç´¢ Webé“¾æ¥å›¾éå† &amp;hellip; Fig 1.</description>
    </item>
    
    <item>
      <title>ğŸ‰NewsğŸ‰</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/about/news/</link>
      <pubDate>Sun, 01 Jan 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/about/news/</guid>
      <description></description>
    </item>
    
    <item>
      <title>About</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/about/about/</link>
      <pubDate>Sun, 01 Jan 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/about/about/</guid>
      <description>HiğŸ‘‹, I am Chenghua Wang, currently a Senior student at ZJGSU.
I am currently looking for labs that do HPC+AI research(LLM/Diffusion-Model/Edge Inference, Distributed Training, Heterogeneous Compute). I am interested in machine learning system, distributed system, HPC+AI, Hardware/Software Co-design. Currently working on nncv(A neural network inference and compile framework for computer vision; for practicing purpose). I have struggled for almost one and half years on computer vision(Dehazing, Multi-label classification. July 1 2021 -&amp;gt; Dec 31 2022) contact me: chenghua.</description>
    </item>
    
    <item>
      <title>Lecture-Notes</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/about/lecture_notes/</link>
      <pubDate>Sun, 01 Jan 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/about/lecture_notes/</guid>
      <description>Principles of Compiler 2023-05-03, ç¼–è¯‘åŸç†é€šå…³æ”»ç•¥, link </description>
    </item>
    
    <item>
      <title>Paper-Notes</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/about/paper_posts/</link>
      <pubDate>Sun, 01 Jan 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/about/paper_posts/</guid>
      <description>distributed system 2023-01-17, MapReduce, link
2023-01-18, Google File System(GFS), link
2023-01-19, The Design of a Practical System for Fault-Tolerant Virtual Machines, link</description>
    </item>
    
    <item>
      <title>Tech-Posts</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/about/tech_posts/</link>
      <pubDate>Sun, 01 Jan 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/about/tech_posts/</guid>
      <description>MIT6.S081, XV6 Lab 2023-02-23, XV6 lab 1 Utilities, link
2023-02-25, XV6 lab 2 syscall, link
2023-03-02, XV6 lab 3 page table, link
2023-03-12, XV6 lab 4 traps, link
2023-03-17, XV6 lab 5 copy on write, link
Tools 2023-04-18, CUDA: NSight System, link Parallel 2023-05-02, æµ…ææœºå™¨å­¦ä¹ ä¸­çš„å¹¶è¡Œæ¨¡å‹å’Œè‡ªåŠ¨å¹¶è¡Œæ–¹æ³•, link Compiler </description>
    </item>
    
    <item>
      <title>Thinking</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/about/thinking/</link>
      <pubDate>Sun, 01 Jan 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/about/thinking/</guid>
      <description></description>
    </item>
    
    <item>
      <title></title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_overall/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_overall/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
