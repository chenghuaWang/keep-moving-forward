<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Teches on Ubios Home</title>
    <link>https://chenghuawang.github.io/keep-moving-forward/tech/</link>
    <description>Recent content in Teches on Ubios Home</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Mon, 12 Jun 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://chenghuawang.github.io/keep-moving-forward/tech/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>æµ…æ IREE</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/intro_to_iree/</link>
      <pubDate>Mon, 12 Jun 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/intro_to_iree/</guid>
      <description>æœ€è¿‘åœ¨ç¼–å†™ NNCV(nerual network inference and comile framework for computer vision, è¿™æ˜¯ä¸€ä¸ªä»¥å·¥ç¨‹é©±åŠ¨çš„å­¦ä¹  MLSys çš„é¡¹ç›®ï¼Œå¯èƒ½ä½œä¸ºä¸€äº›è¯¾ç¨‹ä½œä¸š/æ¯•è®¾ä½¿ç”¨ã€‚è‡³äºä¸ºä»€ä¹ˆæ˜¯ for computer visionï¼Œåªèƒ½è¯´ï¼šæ—¶é—´æœ‰é™ï¼Œä¼˜å…ˆèƒ½è·‘èµ·æ¥ resnet å°±è¡Œäº†) çš„è¿‡ç¨‹ä¸­åœ¨ä¸æ–­çš„è°ƒç ”å„ç§æ¨ç†æ¡†æ¶å’Œæ·±åº¦å­¦ä¹ ç¼–è¯‘å™¨çš„è®¾è®¡é€»è¾‘ï¼Œç®—æ³•å®ç°ç­‰ã€‚æˆ‘å‘ç°æˆ‘åœ¨ NNCV ä¸­çš„è®¾è®¡é€»è¾‘å’Œ IREE éå¸¸çš„ç›¸ä¼¼ï¼Œå¯èƒ½è¿™ä¸ªæ¡†æ¶çš„å½¢æ€å¤§å®¶éƒ½æ˜¯è¿™ä¹ˆæƒ³çš„å§ï¼Œå…¶å®æ•´ä¸ªç±»å‹çš„æ¡†æ¶è®¾è®¡æ˜¯éå¸¸æ˜¾ç„¶çš„ã€‚éƒ½æ˜¯ä½¿ç”¨ç¼–è¯‘æŠ€æœ¯æ¥å¯¹è®¡ç®—å›¾åšæ·±å±‚çš„ä¼˜åŒ–ï¼Œåš CodeGenï¼ŒScheduleï¼Œç­‰ã€‚æœ€ç»ˆç”Ÿæˆç›®æ ‡å¹³å°çš„æœºå™¨ç å’Œ vm(ä¹Ÿå¯ä»¥è¯´æ˜¯ runtime)ä¸Šçš„å­—èŠ‚ç ã€‚ä¸»è¦å…‹æœçš„éš¾ç‚¹ä»ç„¶æ˜¯ CodeGenï¼ŒåŠ¨æ€ Shapeï¼ŒAuto Schedule ä¸Šã€‚
IREE æ˜¯ä»€ä¹ˆï¼Ÿ ä¸€å¦‚æ—¢å¾€çš„ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è®¾è®¡ iree çš„å›¢é˜Ÿå¯¹å…¶ä½œå“çš„å®šä¹‰[1]ï¼š
IREE (Intermediate Representation Execution Environment) is an MLIR-based end-to-end compiler and runtime that lowers Machine Learning (ML) models to a unified IR that scales up to meet the needs of the datacenter and down to satisfy the constraints and special considerations of mobile and edge deployments.</description>
    </item>
    
    <item>
      <title>æµ…ææœºå™¨å­¦ä¹ ä¸­çš„å¹¶è¡Œæ¨¡å‹å’Œè‡ªåŠ¨å¹¶è¡Œæ–¹æ³•</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/introduction_mldistri/</link>
      <pubDate>Tue, 02 May 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/introduction_mldistri/</guid>
      <description>äººå·¥æ™ºèƒ½é¢†åŸŸçš„è®¸å¤šæœ€æ–°è¿›å±•éƒ½å›´ç»•ç€å¤§è§„æ¨¡ç¥ç»ç½‘ç»œå±•å¼€ï¼Œä½†è®­ç»ƒå¤§è§„æ¨¡ç¥ç»ç½‘ç»œæ˜¯ä¸€é¡¹è‰°å·¨çš„å·¥ç¨‹å’Œç ”ç©¶æŒ‘æˆ˜ï¼Œéœ€è¦åè°ƒGPUé›†ç¾¤æ¥æ‰§è¡Œå•ä¸ªåŒæ­¥è®¡ç®—ã€‚éšç€é›†ç¾¤æ•°å’Œæ¨¡å‹è§„æ¨¡çš„å¢é•¿ï¼Œæœºå™¨å­¦ä¹ ä»ä¸šè€…å¼€å‘äº†å¤šé¡¹æŠ€æœ¯ï¼Œè®©æœºå™¨å­¦ä¹ æ¨¡å‹èƒ½åœ¨å¤šä¸ªGPUä¸Šè¿›è¡Œå¹¶è¡Œæ¨¡å‹è®­ç»ƒã€‚
ä¹ä¸€çœ‹ï¼Œè¿™äº›å¹¶è¡ŒæŠ€æœ¯ä»¤äººç”Ÿç•ï¼Œä½†åªéœ€å¯¹è®¡ç®—ç»“æ„è¿›è¡Œä¸€äº›å‡è®¾ï¼Œè¿™äº›æŠ€æœ¯å°±ä¼šå˜å¾—æ¸…æ™°ï¼šä»æŸäº›è§’åº¦æ¥çœ‹ï¼Œè¿™ä¹Ÿåªæ˜¯ä» A åˆ° B ä¼ é€’å¹¶ä¸é€æ˜çš„ä½ï¼Œå°±åƒæ•°æ®åŒ…åœ¨ç½‘ç»œäº¤æ¢æœºä¹‹é—´ä¼ é€’ä¸€æ ·ã€‚
å„ç§ Parallel æ¨¡å‹ ä¸åŒçš„å¹¶è¡ŒæŠ€æœ¯å°†è®­ç»ƒè¿‡ç¨‹åˆ’åˆ†ä¸ºä¸åŒçš„ç»´åº¦ï¼ŒåŒ…æ‹¬ï¼š
æ•°æ®å¹¶è¡Œï¼ˆData Parallelismï¼‰åœ¨ä¸åŒçš„GPUä¸Šè¿è¡ŒåŒä¸€æ‰¹æ•°æ®çš„ä¸åŒå­é›† DPï¼ˆData Parallelï¼‰ DDPï¼ˆDistributed Data Parallelï¼‰ FSDPï¼ˆFully Shared Data Parallelï¼‰ æµæ°´å¹¶è¡Œï¼ˆPipeline Parallelismï¼‰åœ¨ä¸åŒçš„GPUä¸Šè¿è¡Œæ¨¡å‹çš„ä¸åŒå±‚ æ¨¡å‹å¹¶è¡Œï¼ˆTensor Parallelismï¼‰å°†å•ä¸ªæ•°å­¦è¿ç®—ï¼ˆå¦‚çŸ©é˜µä¹˜æ³•ï¼‰æ‹†åˆ†åˆ°ä¸åŒçš„GPUä¸Šè¿è¡Œ ä¸“å®¶æ··åˆï¼ˆMixture-of-Expertsï¼‰åªç”¨æ¨¡å‹æ¯ä¸€å±‚ä¸­çš„ä¸€å°éƒ¨åˆ†æ¥å¤„ç†æ•°æ®ã€‚ Noteï¼šTensor Parallelism ç¿»è¯‘æˆæ¨¡å‹å¹¶è¡Œå¯èƒ½å¹¶ä¸æ˜¯éå¸¸çš„æ°å½“ğŸ¤£
1. å¹¶è¡Œæ¨¡å‹ 1.1 æ•°æ®å¹¶è¡Œ ï¼ˆData Parallesimï¼‰ æ•°æ®å¹¶è¡Œæ˜¯æŒ‡å°†ç›¸åŒçš„å‚æ•°å¤åˆ¶åˆ°å¤šä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸ºæ¯ä¸ªå·¥ä½œèŠ‚ç‚¹åˆ†é…ä¸åŒçš„æ•°æ®å­é›†åŒæ—¶è¿›è¡Œå¤„ç†ã€‚æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹æ‹¥æœ‰å®Œæ•´çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œæ¯æ¬¡è®­ç»ƒä»…å°†ä¸€æ‰¹æ•°æ®è¾“å…¥æ¨¡å‹ï¼Œè¿›è¡Œå‰å‘ä¼ æ’­ã€è®¡ç®—è¯¯å·®ã€åå‘ä¼ æ’­ï¼Œæœ€åè¿›è¡Œå‚æ•°çš„æ›´æ–°ã€‚å‚¨äº†å‚æ•°çš„æ›´æ–°ï¼Œå…¶ä½™çš„æ“ä½œéƒ½æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šè¿›è¡Œå¹¶å‘çš„æ‰§è¡Œã€‚
æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹éƒ½æœ‰è‡ªå·±çš„æ¨¡å‹å’Œè¾“å…¥ï¼Œå½“å±äºè‡ªå·±çš„æ¨¡å‹å‚æ•°æ¨ç†å®Œæˆåï¼ˆäº§ç”Ÿäº†æ¢¯åº¦å‚æ•°ï¼‰ï¼Œæ‰€æœ‰çš„å·¥ä½œèŠ‚ç‚¹ä¼šæŠŠå‚æ•°ï¼ˆæ¢¯åº¦å‚æ•°ï¼‰å‘ç»™ä¸€ä¸ª Masterï¼Œè¿™ä¸ª Master ä¼šæŠŠæ‰€æœ‰èŠ‚ç‚¹ä¼ è¿›æ¥çš„å‚æ•°åšèåˆï¼Œé€šè¿‡è¿™äº›æ¢¯åº¦å‚æ•°æ›´æ–°ç”Ÿæˆæ–°çš„æ¨¡å‹å‚æ•°ï¼Œç„¶åæŠŠè¿™ä¸ªæ¨¡å‹çš„å‚æ•°å†å‘é€ç»™æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ï¼Œæ‹±ä»–ä»¬è¿›è¡Œä¸‹ä¸€è½®çš„è®¡ç®—ã€‚
åœ¨ Pytorch ä¸­æä¾›äº†DPï¼ˆData Parallelï¼‰ã€DDPï¼ˆDistributed Data Parallelï¼‰ã€FSDPï¼ˆFully Shared Data Parallelï¼‰ä¸‰ç§ä¸åŒçš„æ•°æ®å¹¶è¡Œæ–¹æ³•ã€‚
1.1.1 DPï¼ˆData Parallelï¼‰Parameter Server DP ä½¿ç”¨äº† Parameter Serverï¼ˆPSï¼‰ ä½œä¸ºç†è®ºä¾æ®ã€‚PS ç»“æ„æ˜¯ææ²è€å¸ˆæå‡ºæ¥çš„æ–¹æ³•ï¼Œç”±serverèŠ‚ç‚¹å’ŒworkerèŠ‚ç‚¹ç»„æˆã€‚
[ç‚¹å‡»æŠ˜å ] ææ²è€å¸ˆçš„ PS è®²è§£ Server èŠ‚ç‚¹çš„ä¸»è¦åŠŸèƒ½æ˜¯åˆå§‹åŒ–å’Œä¿å­˜æ¨¡å‹å‚æ•°ã€æ¥å—workerèŠ‚ç‚¹è®¡ç®—å‡ºçš„å±€éƒ¨æ¢¯åº¦ã€æ±‡æ€»è®¡ç®—å…¨å±€æ¢¯åº¦ï¼Œå¹¶æ›´æ–°æ¨¡å‹å‚æ•°ã€‚
Parameter Server Worker èŠ‚ç‚¹çš„ä¸»è¦åŠŸèƒ½æ˜¯å„è‡ªä¿å­˜éƒ¨åˆ†è®­ç»ƒæ•°æ®ï¼Œåˆå§‹åŒ–æ¨¡å‹ï¼Œä» Server èŠ‚ç‚¹æ‹‰å–ï¼ˆPullï¼‰æœ€æ–°çš„æ¨¡å‹å‚æ•°ï¼Œå†è¯»å–å‚æ•°ï¼Œæ ¹æ®è®­ç»ƒæ•°æ®è®¡ç®—å±€éƒ¨æ¢¯åº¦ï¼Œä¸Šä¼ ï¼ˆPushï¼‰ç»™ Server èŠ‚ç‚¹ã€‚psï¼šææ²è€å¸ˆè¯´è¿™ä¸ª Pull å’Œ Push å«æ³•æ¥æºäº Gitã€‚</description>
    </item>
    
    <item>
      <title>How to Optimize Convolution</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/how_to_optimize_convlution/</link>
      <pubDate>Fri, 21 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/how_to_optimize_convlution/</guid>
      <description>æ­¤ç¯‡æ–‡ç« è®°å½•äº†ä¸€ä¸ªä¸ªäººé¡¹ç›®(NNCVï¼Œé¢å‘è®¡ç®—æœºè§†è§‰çš„ç¥ç»ç½‘ç»œç¼–è¯‘æ¨ç†æ¡†æ¶) ä¸­çš„ Conv å®ç°å’ŒåŠ é€Ÿè¿‡ç¨‹
1. Algorithms 1.0 naive é¦–å…ˆï¼Œå…ˆç¥­å‡º [4] CS231n ä¸­åŒ…æµ†çš„å›¾ï¼Œå¯¹äº naive çš„åšæ³•ï¼Œå°±æ˜¯æŒ‰ç…§å·ç§¯çš„åŸç†æ¥åšï¼Œä¸åšä»»ä½•çš„ä¼˜åŒ–ã€‚
Conv from CS231n[4]. 1.1 img2col &amp;amp; img2row 1.2 Winograd 1.2.x winograd impl in NCNN 1.3 Conv on mobile device 1.4 Depth Wise Conv 2. Handcraft kernel impl 2.0 Data Layout ä¸€èˆ¬ 4D-Tensor æ•°æ®å¸ƒå±€çš„å½¢å¼æ˜¯ NCHW å’Œ NHWCï¼Œå…¶ä¸­ N è¡¨ç¤º Batch sizeï¼ŒC è¡¨ç¤º Channelï¼ŒH è¡¨ç¤º Heightï¼ŒW è¡¨ç¤º Widthã€‚æœ¬æ–‡ä¸­æ‰€æœ‰çš„ä¾‹å­éƒ½æ˜¯ NCHW çš„ 4D-Tensorã€‚
NCHW Datalayout[5]. ä½¿ç”¨ä¸Šè¿°å›¾åƒ [5] æ¥å±•ç¤ºæ•°æ®æ’å¸ƒã€‚å¯¹äº NCHW æ’åˆ—æ–¹æ³•æ¥è¯´ï¼š</description>
    </item>
    
    <item>
      <title>CUDA: NSight System</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/cuda_nsight_system/</link>
      <pubDate>Tue, 18 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/cuda_nsight_system/</guid>
      <description>NSight System Document
WSL 2 çš„ cudaMallocHost() ä¸èƒ½æ­£å¸¸ç”³è¯·åˆ° VM çš„å†…å­˜ã€‚ä¹Ÿè®¸æ˜¯ WSL 2 ä¸Šçš„ cuda æ˜¯ ubuntu20.04 çš„ç‰ˆæœ¬ï¼Œä¸æ˜¯ WSL 2 ç‰¹ä¾›ç‰ˆã€‚WSL 2 çš„ cuda ä¹Ÿæœ‰ä¸€äº›é™åˆ¶ï¼Œè¯¦ç»†è§ WSL2 User guide ã€‚
1. ä»€ä¹ˆæ˜¯ Nsight System æˆ‘ä»¬å…ˆçœ‹ä¸‹ Nsight System å®˜ç½‘å¯¹è¯¥å·¥å…·çš„æè¿°ï¼š
NVIDIA Nsightâ„¢ Systems is a system-wide performance analysis tool designed to visualize an applicationâ€™s algorithms, help you identify the largest opportunities to optimize, and tune to scale efficiently across any quantity or size of CPUs and GPUs, from large servers to our smallest system on a chip (SoC).</description>
    </item>
    
    <item>
      <title>XV6 Lab 5: Copy On Write</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab5_cow/</link>
      <pubDate>Fri, 17 Mar 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab5_cow/</guid>
      <description>xv6 ä¸­çš„ fork() ç³»ç»Ÿè°ƒç”¨å°†çˆ¶è¿›ç¨‹çš„æ‰€æœ‰ç”¨æˆ·ç©ºé—´å†…å­˜å¤åˆ¶åˆ°å­è¿›ç¨‹ä¸­ã€‚å¦‚æœçˆ¶è¿›ç¨‹å¾ˆå¤§ï¼Œå¤åˆ¶å¯èƒ½éœ€è¦å¾ˆé•¿çš„æ—¶é—´ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¿™é¡¹å·¥ä½œé€šå¸¸æ˜¯æ— ç”¨çš„ï¼šfork() ä¹‹åé€šå¸¸æ˜¯å­è¿›ç¨‹çš„ exec()ï¼Œå®ƒæ”¾å¼ƒäº†å¤åˆ¶çš„å†…å­˜ï¼Œæ²¡æœ‰ä½¿ç”¨å¤åˆ¶è¿‡æ¥çš„å¤§éƒ¨åˆ†å†…å­˜ã€‚å¦‚æœçˆ¶ä»£å’Œå­ä»£éƒ½ä½¿ç”¨äº†å¤åˆ¶çš„é¡µé¢ï¼Œå¹¶ä¸”å…¶ä¸­ä¸€ä¸ªæˆ–ä¸¤ä¸ªéƒ½å†™äº†å®ƒï¼Œé‚£ä¹ˆè¿™ä¸ªå¤åˆ¶æ‰æ˜¯çœŸæ­£éœ€è¦çš„ã€‚
æ‰€ä»¥å†™æ—¶å¤åˆ¶(copy on write, cow) è¿™ä¸ªæŠ€æœ¯å˜å¾—ååˆ†çš„é‡è¦ã€‚åœ¨è¿™ä¸ª lab ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå†™æ—¶å¤åˆ¶çš„ fork()ã€‚æˆ‘ä»¬éœ€è¦ä¿®æ”¹åŸæœ¬çš„ fork() ç¨‹åºä¸­åšå†…å­˜ç”³è¯·çš„æ¨¡å—ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦å®ç° usertrap æ¥åœ¨å†™æ—¶(åœ¨å®é™…å†™çš„æ—¶å€™ç¢°åˆ° cow flagï¼ŒæŠ›å‡ºåˆ†é¡µé”™è¯¯)çš„æ—¶å€™å¤„ç†è¿™ä¸ª trapã€‚
å› ä¸ºä¸€ä¸ªç¨‹åºå¾ˆå¯èƒ½è¢« fork() äº†å¾ˆå¤šçš„åˆ†æ”¯ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè®¡æ•°å™¨æ¥ç¡®å®šè¿™ä¸ª page æ˜¯è¦è¢«é‡Šæ”¾è¿˜æ˜¯ä¿ç•™ã€‚
ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªæ­£å¸¸è¿è¡Œçš„ç¨‹åºåœ¨å†™æ—¶å¤åˆ¶çš„æ—¶å€™ä¼šæœ‰ä¸‹é¢å‡ ä¸ªæµç¨‹:
fork() å‡ºä¸€ä¸ªå­è¿›ç¨‹ childã€‚ child æ‹¥æœ‰çˆ¶è¿›ç¨‹çš„é¡µçš„å¼•ç”¨ï¼Œå¹¶ä¸”é¡µçš„ flag æœ‰ cow æ ‡è¯†ã€‚ å¹¶ä¸”è¦æŠŠ é¡µ å¼•ç”¨ ++ child éœ€è¦å‘è‡ªå·±çš„é¡µä¸­å†™å…¥æ–°çš„æ•°æ®. æ­¤æ—¶éœ€è¦é‡æ–°åˆ†é…å†…å­˜ï¼Œé¡µå¼•ç”¨ &amp;ndash;ã€‚ å½“ child è¿”å›çš„æ—¶å€™ï¼Œå¯èƒ½æœ‰å†…å­˜éœ€è¦ç”± kernel è½¬æ¢åˆ° userã€‚ å½“çˆ¶è¿›ç¨‹é”€æ¯çš„æ—¶å€™ï¼Œå¦‚æœè®¡æ•°å™¨ä¸º 0ï¼Œåˆ™é”€æ¯ï¼Œåä¹‹ï¼Œä¸å˜ã€‚ æ¯ä¸€é¡µéƒ½éœ€è¦ä¸€ä¸ªè®¡æ•°å™¨æ¥è¿›è¡Œè®¡æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ kernel ä¸­åŠ å…¥ä¸€ä¸ªæ•°ç»„æ¥è®°å½•ï¼ŒæŸ¥é˜… xv6 bookï¼Œæˆ‘ä»¬å‘ç°æœ‰å¦‚ä¸‹çš„å›¾:
Fig 1. memlayoutæˆ‘ä»¬éœ€è¦åœ¨ kernel data ä¹‹åçš„åŒºåŸŸå†…ç”³è¯·ä¸€å—å†…å­˜æ¥ä½œä¸ºè®¡æ•°å™¨å­˜å‚¨çš„æ•°ç»„ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ kalloc.c ä¸­å®ç°ã€‚
// ./kernel/kalloc.c struct { struct spinlock lock; struct run *freelist; // lab 5 uint* ref_cnt; struct spinlock ref_cnt_lock; char * pa_start; } kmem; åœ¨è¿™ä¸ª kmem ç»“æ„ä½“ä¸­åŠ å…¥äº†ä¸€ä¸ª ref_cnt_lock æ¥ä¿è¯è®¡æ•°å™¨çš„æ­£ç¡®å¼•ç”¨ã€‚ä¸€ä¸ª ref_cnt pointer æ¥æŒ‡ç¤º ref array çš„èµ·å§‹ä½ç½®ï¼Œä½¿ç”¨ pa_start æ¥è¡¨ç¤ºå®é™…çš„ free memory çš„èµ·å§‹ä½ç½®ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹åˆå§‹åŒ–ç¨‹åºæ¥æ­£ç¡®çš„ç”³è¯·è®¡æ•°å™¨æ•°ç»„ï¼Œå¹¶ä¸”å¯¹ free memory å¡«å……ä¸Šä¸€ä¸ªåˆå§‹å€¼ã€‚</description>
    </item>
    
    <item>
      <title>XV6 Lab 4: Traps</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab4_trap/</link>
      <pubDate>Sun, 05 Mar 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab4_trap/</guid>
      <description>RISC-V assembly Which registers contain arguments to functions? For example, which register holds 13 in main&amp;rsquo;s call to printf?
Register: a0, a1, a2&amp;hellip;, a7 for integer arguments. Register fa0, fa1, fa2&amp;hellip;, fa7 for float arguments.
Register a2 holds 13 when we call printf().
Where is the call to function f in the assembly code for main? Where is the call to g? (Hint: the compiler may inline functions.)
Compiler inlined f(8) and g() in printf() function.</description>
    </item>
    
    <item>
      <title>XV6 Lab 3: Page Table</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab3_pagetable/</link>
      <pubDate>Thu, 02 Mar 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab3_pagetable/</guid>
      <description>MIT 6.S081 Lab3 website
åš Lab 3 éœ€è¦æå‰é˜…è¯» XV6 bookï¼Œäº†è§£ RISC-V SR39 çš„åœ°å€æ ¼å¼ï¼Œå¹¶ä¸”å®éªŒä¸­å¤§é‡ç”¨åˆ°äº†é¡µè¡¨çš„å‡†æ¢å‡½æ•°ï¼Œéœ€è¦æŸ¥é˜… XV6 æ‰‹å†Œã€‚ä¸è¿‡ï¼Œç†Ÿè®° RISC-V çš„åœ°å€è¯´å®åœ¨çš„æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ï¼Œé€šè¿‡è¿™ä¸ªå®éªŒç†è§£é¡µè¡¨çš„å·¥ä½œæ–¹å¼å¹¶ä¸” hands on æ‰æ˜¯çœŸçš„ã€‚
Speed up system calls ç›®å‰æœ‰å¾ˆå¤šçš„æ“ä½œç³»ç»Ÿ(Linux)åœ¨ç”¨æˆ·åŒºå’Œå†…æ ¸åŒºä¹‹é—´å…±äº«ä¸€å—æ•°æ®(Read-Only for user)ï¼Œè¿™æ ·ç”¨æˆ·åœ¨è¿›è¡Œç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™å°±ä¸éœ€è¦é™·å…¥å†…æ ¸æ€åï¼Œç”±å†…æ ¸æ€æ‹·è´æ•°æ®è¿›ç”¨æˆ·æ€ï¼Œè€Œæ˜¯å°†æ•°æ®å†™åœ¨è¿™ä¸ªå…±äº«çš„åŒºå—å†…ã€‚è¿™æ ·å¯ä»¥åŠ å¿«æ“ä½œç³»ç»Ÿçš„è¿è¡Œé€Ÿåº¦(æ¯•ç«Ÿå¤§éƒ¨åˆ†ç³»ç»Ÿè°ƒç”¨éœ€è¦çš„å†…å­˜æ¶ˆè€—æ˜¯å¾ˆå°çš„ï¼Œå†…å­˜çš„æ¶ˆè€—åœ¨å½“ä»Šå·²ç»ä¸æ˜¯é—®é¢˜)ã€‚
åœ¨æœ¬å®éªŒä¸­æˆ‘ä»¬éœ€è¦ä½¿ç”¨ ugetpid() æ¥è¿›è¡ŒåŠ é€Ÿè·å¾—è¿›ç¨‹çš„ pidã€‚
é¦–å…ˆå°±æ˜¯ä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºä¸€ä¸ªé¡µè¡¨ä½œä¸ºå…±äº«å†…å­˜åŒºå—ã€‚æˆ‘ä»¬å‘ç°åœ¨ kernel\memlayout.h ä¸­å·²ç»ä¸ºæˆ‘ä»¬å®šä¹‰å¥½äº†éœ€è¦çš„æ•°æ®ç»“æ„:
struct usyscall { int pid; // Process ID }; é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨ kernel/proc.c /proc.h ä¸­åŠ å…¥ä»£ç ï¼Œæ¥å®ç°è¿›ç¨‹åˆ›å»ºæ—¶åˆ›å»ºé¡µè¡¨ï¼Œé”€æ¯æ—¶é”€æ¯é¡µè¡¨çš„åŠ¨ä½œå°±è¡Œäº†ã€‚
åœ¨ proc.h ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¿›ç¨‹çš„ PCB ä¸­åŠ å…¥æ–°çš„æ•°æ®ç»“æ„:
struct proc { ... struct usyscall *usyscall; // using read only shared data to accelerate. ... } ä¸ºäº†è®©è¿›ç¨‹çš„æ­£å¸¸åˆ›å»ºå’Œé‡Šæ”¾ï¼Œæˆ‘ä»¬éœ€è¦å‘è¿›ç¨‹åˆ›å»ºå’Œé”€æ¯å‡½æ•°ä¸­åŠ å…¥å¯¹åº”çš„é¡µè¡¨æ“ä½œä»£ç ã€‚</description>
    </item>
    
    <item>
      <title>XV6 Lab 2: syscall</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab2_syscall/</link>
      <pubDate>Sat, 25 Feb 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab2_syscall/</guid>
      <description>MIT 6.S081 Lab2 website
ä¸ºäº†å®Œæˆ Syscall ä½œä¸šï¼Œéœ€è¦é˜…è¯»:
XV6-book, Chapter 2, Sections 4.3 and 4.4
files: user/user.h, kernel/proc.c kernel/proc.h, kernel/syscall.c kernel/syscall.h
system call tracing system call tracing éœ€è¦æˆ‘ä»¬è¡¥å…… kernel ä¸­çš„ä¸€äº›ç¨‹åºï¼Œå°†æŸç¨‹åºä¸­æŒ‡å®šçš„ system call æ‰“å°å‡ºæ¥ã€‚å½“ç„¶ï¼Œè¿™éœ€è¦æˆ‘ä»¬æ–°å¢ä¸€ä¸ª system_trace ç³»ç»Ÿè°ƒç”¨å‡½æ•°ã€‚é¢˜ä¸­ï¼Œç»™å®šçš„ tracing ç¨‹åºä»¥ trace [system-call-number] [cmd] çš„æ–¹å¼è¿è¡Œã€‚æˆ‘ä»¬é¦–å…ˆå»çœ‹ user/trace.c ä¸­çš„å†…å®¹ï¼Œçœ‹çœ‹ system call number æ˜¯æ€ä¹ˆä¼ å…¥ç³»ç»Ÿè°ƒç”¨çš„ã€‚
user/trace.c çš„ç¨‹åºå¦‚ä¸‹æ‰€ç¤º:
int main(int argc, char *argv[]) { int i; char *nargv[MAXARG]; if(argc &amp;lt; 3 || (argv[1][0] &amp;lt; &amp;#39;0&amp;#39; || argv[1][0] &amp;gt; &amp;#39;9&amp;#39;)){ fprintf(2, &amp;#34;Usage: %s mask command\n&amp;#34;, argv[0]); exit(1); } if (trace(atoi(argv[1])) &amp;lt; 0) { fprintf(2, &amp;#34;%s: trace failed\n&amp;#34;, argv[0]); exit(1); } for(i = 2; i &amp;lt; argc &amp;amp;&amp;amp; i &amp;lt; MAXARG; i++){ nargv[i-2] = argv[i]; } exec(nargv[0], nargv); exit(0); } æˆ‘ä»¬å‘ç°è¿™ä¸ªç¨‹åºç›´æ¥ä½¿ç”¨äº† trace ç³»ç»Ÿè°ƒç”¨æ¥å®ç°ã€‚æ‰€ä»¥æ¥ä¸‹æ¥çš„ä»»åŠ¡æ˜¯è¿›è¡Œ trace ç³»ç»Ÿè°ƒç”¨çš„å®ç°ã€‚å†æ¬¡å›é¡¾ Lab 1 ä¸­çš„å†…å®¹ï¼Œåœ¨ Lab 1 ä¸­æˆ‘ä»¬åˆ†æç³»ç»Ÿè°ƒç”¨æ˜¯é€šè¿‡åœ¨ usys.</description>
    </item>
    
    <item>
      <title>XV6 Lab 1: Xv6 and Unix utilities</title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab1_utility/</link>
      <pubDate>Thu, 23 Feb 2023 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_lab1_utility/</guid>
      <description>MIT 6.S081 Lab1 website
æœ¬ç« èŠ‚çš„å®éªŒæ˜¯ä¸ºäº†ç†Ÿæ‚‰ XV6 ç¯å¢ƒå’Œ interface è€Œå‡†å¤‡çš„ã€‚åŒ…å«äº† interface è°ƒç”¨ã€å¤šè¿›ç¨‹ç¼–ç¨‹ã€Pipelineã€‚
é˜…è¯» book-riscv-ref3 ç†Ÿæ‚‰ XV6 çš„ç³»ç»Ÿç»„ç»‡å½¢å¼
sleep é€šè¿‡è°ƒç”¨ user.h ä¸­çš„ç³»ç»Ÿè°ƒç”¨å‡½æ•°æ¥å®Œæˆ sleep ç¨‹åºã€‚ä¸»è¦æ˜¯ä¸ºäº†ä»‹ç» ç³»ç»Ÿè°ƒç”¨ çš„å·¥ä½œæ–¹å¼ã€‚
/** * @author chenghua.wang * @brief Lab1-utilities. sleep prog using syscall. * @time Feb 23, 2023 * */ #include &amp;#34;kernel/types.h&amp;#34; #include &amp;#34;kernel/stat.h&amp;#34; #include &amp;#34;user/user.h&amp;#34; int main(int argc, char *argv[]){ if (argc != 2){ printf(&amp;#34;[ error ] you should follow anw integer with sleep prog to indicate ticks times!</description>
    </item>
    
    <item>
      <title></title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/mlir_toy_1/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/mlir_toy_1/</guid>
      <description></description>
    </item>
    
    <item>
      <title></title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/nv-archs-introduction/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/nv-archs-introduction/</guid>
      <description></description>
    </item>
    
    <item>
      <title></title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/raft_cpp_impl/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/raft_cpp_impl/</guid>
      <description>Try to implement a raft algorithm in c++. And binding python interface on it.
In this artical:
The original raft algorithm. Paper analyze. The cpp impl of raft. What&amp;rsquo;s new in my impl. Python binding, and wheel to official python libs(On both windows and debian linux). API reference. That&amp;rsquo;s quite a large project. Taking almost 9 month to finish it !!! Just do it.</description>
    </item>
    
    <item>
      <title></title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/tensordock_interface_design/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/tensordock_interface_design/</guid>
      <description></description>
    </item>
    
    <item>
      <title></title>
      <link>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_overall/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://chenghuawang.github.io/keep-moving-forward/tech/xv6_overall/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
